# uniapp组件改进
收集了一些好用uniapp组件，并对**自适应尺寸**和**自识别单位**方面进行改进，使它能适应**横屏**和**竖屏**。

## 感谢
首先，非常感谢vViewUI这么优秀的框架，使得uniapp开发方便好多，前期我主要做竖屏开发，使用还可以。后期准备适配横屏时感觉调整大小太困难了，这个官方的uni组件也是同样问题。
>- 是他们都是优先考虑竖版，
>- 几乎是所有组件的通病；就是使用内部使用rpx定义尺寸导致不灵活
>- 单位不能自动识别，如auto、数值、百分比、px、rpx等。

## 改进建议
1.  **组件属性是否改为自动识别单位。** 如eu-popup.vue中方法getUnitValue中通过正则表达式自动识别数值、auto、百分比、px和rpx，默认是rpx。这个就是很好用，这个方法我在改进其它组件时也应用到了，希望其它组件普及这种自动识别单位的做法，给用户更灵活的操作。
2. **组件内部的布局减少外界的影响。** 大量使用rpx导致组件内部布局受外界影响大，尤其是横屏时间距和字体变得特别大，如u-notice-bar前期我还通过穿透来修改，但费时费力，版本一更新又要查看一遍，感觉这个不是优秀组件应该原的，它应该少受外界影响。后来在某培训上学习了自适应后，发现可用em和百分比解决这个问题。我的思路是布局、宽高多用百分比，边距、定位多用em，字体若要调整用em，这样改进后，组件大小只受父级影响，内部实现了自适应，不管什么设备，都可以保证优秀的界面而已，我没修改u-notice-bar，是因为有更多功能的wxy-noticeBar，它支持停留，我对它进行了自适应改进<https://github.com/woxiaoyao81/uniapp-mod/tree/main/wyb-noticeBar>。
3. **增加插槽。** 这点在使用u-swiper时感觉非常明显，由于V3编译器在APP不支持$slots，许多组件都没有提供插槽功能，我对u-swiper进行了改进<https://github.com/woxiaoyao81/u-swiper-mod>，方案就是增加一个属性来解决V3不支持$slots问题
4. **影响组件应该是谁。** uView绝大部分组件是受设备尺寸影响，其实设备不仅仅有分辨率，还有设备像素比，组件经常出现的28rpx主要考虑了dpr是2，其它像素比忽略了。我觉得**影响组件最好是它的父级** ，想让组件受设备尺寸影响就设备父级宽高等于设备就可以，若是设置父级固定尺寸或百分比后，组件也会自适应调整，这样不是很优秀吗？


目前解决思路：
在PHP中文十三期培训中学习了父级影响子元素的两类单位:
>- **em与rem** 通过em特殊的特性(font-size继承父级，本身margin、padding等不可继承属性则依据本身)来定义内部组件的margin、padding、position等。
>- **百分比**  百分比通常定义width和height，再一个如背景图backgroud-size是依据块的大小来定义的，想实现 **宽高成比例自适应** ，可定义如width:60%;padding-bottom:10%来保证6:1，因为width、padding和margin都是依据父级宽度。具体可查MDN。
>- 单位的自适应。如 **rpx、px、数值、auto和百分比自动适配** ，这里可以参考u-popup.vue中方法getUnitValue，通过正则表达式可以识别

|类型|举例|自动识别说明|
|:-:|:-:|:-:|
|尺寸|width、height|auto、百分比、px、rpx和数值，默认单位为rpx，可定义其它|
|字体|fontt等|px、rpx、em、rem和数值，默认单位为rpx，可定义其它|
|位置|position、margin、padding等|百分比、px、rpx、em和数值，默认单位为rpx，可定义其它|
|颜色|color等|HexColor、RgbColor和关键字，默认是HexColor|


## 目录列表
|目录名|说明|
|:-:|:--|
|wxy-noticeBar|对uniapp插件市场通告进行了改进，自适应父级，自动识别单位、优化其它代码，具体见里面说明。uView和uni的noticeBar共同就是自适应和自识别都存在不友好。|
